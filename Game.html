<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Game</title>
  <link rel="stylesheet" href="style.css">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: Arial;
      padding: 0px;
      background:#0C3D7A;
    }

    .header {
      padding: 10px;
      text-align: center;
    }

    .topnav {
      background-color: white;
    }

    .topnav a {
      display: block;
      color: #0C3D7A;
      text-align: center;
      padding: 20px 20px;
      text-decoration: none;
    }

    .topnav a:hover {
      background-color: #0C3D7A;
      color: white;
    }

    .leftcolumn {   
      float: left;
      width: 100%;
      color: white;
      margin-left: 0%;
    }

    .rightcolumn {
      float: left;
      width: 0%;
      background-color: #f1f1f1;
      padding-left: 20px;
    }

    .card {
      background-color: white;
      padding: 20px;
      margin-top: 20px;
      font-family: Arial;
      color: #0C3D7A;
      text-align: center;
      position: relative; /* needed for notification inside card */
    }

    .footer {
      padding: 20px;
      text-align: right;
      background: white;
      margin-top: 10px;
    }

    @media screen and (max-width: 800px) {
      .leftcolumn, .rightcolumn {   
        width: 100%;
        padding: 0;
      }
    }

    @media screen and (max-width: 400px) {
      .topnav a {
        float: none;
        width: 100%;
      }
    }

    button {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background: #3498db;
      color: white;
      font-size: 15px;
    }

    button:hover { background: #2980b9; }

    input {
      padding: 8px;
      margin: 5px;
      width: 200px;
    }

    #progressBar {
      width: 100%;
      background: #ddd;
      border-radius: 20px;
      margin-bottom: 15px;
    }

    #progress {
      width: 0%;
      height: 20px;
      background: #27ae60;
      border-radius: 20px;
    }

    table {
      margin: auto;
      border-collapse: collapse;
      width: 90%;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
    }

    th {
      background: #2c3e50;
      color: white;
    }

    #timer {
      font-weight: bold;
      font-size: 18px;
      color: #e74c3c;
    }

    /* Notification centered inside card */
    #notification {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #2ecc71;
      color: white;
      padding: 20px 40px;
      border-radius: 10px;
      display: none;
      font-weight: bold;
      font-size: 18px;
      text-align: center;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      z-index: 1000;
    }
  </style>
</head>

<body>

<div class="header">
<div class="slideshow-container">

<div class="mySlides fade">
  <img src="1.jpg"class="slide-img">
</div>

<div class="mySlides fade">
  <img src="2.jpg"class="slide-img">
</div>

<div class="mySlides fade">
  <img src="3.jpg"class="slide-img">
</div>

</div>
<div style="text-align:center">
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
</div>

<script>
let slideIndex = 0;
showSlides();

function showSlides() {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("dot");
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";  
  }
  slideIndex++;
  if (slideIndex > slides.length) {slideIndex = 1}    
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
  setTimeout(showSlides, 3000); // Change image every 3 seconds
}
</script>

</div>

<div class="topnav">
  <nav>
    <ul class="navbar">
      <li><a href="index.html">Home</a></li>
      <li class="dropdown">
        <a href="#">About LCBA</a>
        <ul class="dropdown-menu">
          <li><a href="Founder.html">The Founder</a></li>
          <li><a href="PVM.html">Philosophy, Vision, Mision</a></li>
          <li><a href="CoreValues.html">Core Values</a></li>
          <li><a href="QOs.html">Quality Objectives</a></li>
        </ul>
      </li>
      <li><a href="AboutHE.html">Home Economics</a></li>
      <li><a href="PhotoGallery.html">Picture Gallery</a></li>
      <li><a href="VideoGallery.html">Video Gallery</a></li>
        <li style="margin-left:auto;">
          <a href="Game.html">Games</a>
        </li>
    </ul>
  </nav>
</div>  

<div class="row">
  <div class="leftcolumn">
    <div class="card">

      <!-- Notification box -->
      <div id="notification"></div>

      <!-- Progress bar -->
      <div id="progressBar"><div id="progress"></div></div>

      <!-- START SCREEN -->
      <div id="start">
        <h2>Enter Player Name</h2>
        <input type="text" id="playerName" placeholder="Student Name">
        <br>
        <button onclick="startGame()">Start Game</button>
      </div>

      <!-- GAME SCREEN -->
      <div id="game" style="display:none;">
        <h2 id="levelTitle"></h2>
        <p id="question"></p>
        <div id="options"></div>
        <p id="timer"></p>
      </div>

      <!-- FINAL SCREEN -->
      <div id="final" style="display:none;">
        <h2>üèÜ Game Completed!</h2>
        <p id="result" style="white-space: pre-line;"></p>
        <button onclick="restart()">Play Again</button>
      </div>

      <!-- DASHBOARD -->
      <div id="dashboard">
        <h2>üìä Teacher Dashboard</h2>
        <table>
          <thead>
            <tr>
              <th>Player</th>
              <th>Score</th>
              <th>Rating</th>
            </tr>
          </thead>
          <tbody id="scoreTable"></tbody>
        </table>
      </div>

    </div>
  </div>
</div>

<div class="footer"></div>

<script>
let player = "";
let score = 0;
let level = 0;
let timerInterval;

// Levels
const levels = [
  {
    title: "Level 1: Kitchen Safety",
    question: "Which of the following is NOT safe in the kitchen?",
    options: [
      {text:"Leave water near an outlet", correct:true},
      {text:"Wash hands before cooking", correct:false},
      {text:"Use oven mitts", correct:false},
      {text:"Keep floor dry", correct:false},
    ],
    time: 15
  },
  {
    title: "Level 2: Food Preparation",
    question: "What is the FIRST step before cooking meat?",
    options: [
      {text:"Serve immediately", correct:false},
      {text:"Wash hands", correct:true},
      {text:"Marinate", correct:false},
      {text:"Turn on stove", correct:false},
    ],
    time: 15
  },
  {
    title: "Level 3: Cooking Methods",
    question: "Which method uses dry heat?",
    options: [
      {text:"Boiling", correct:false},
      {text:"Baking", correct:true},
      {text:"Steaming", correct:false},
      {text:"Poaching", correct:false},
    ],
    time: 20
  },
  {
    title: "Level 4: Housekeeping",
    question: "Which task should be done daily?",
    options: [
      {text:"Make the bed", correct:true},
      {text:"Repaint walls", correct:false},
      {text:"Wash car", correct:false},
      {text:"Change roof tiles", correct:false},
    ],
    time: 10
  },
  {
    title: "Level 5: Entrepreneurship",
    question: "Capital = ‚Ç±1000, Sales = ‚Ç±1500. Profit?",
    options: [
      {text:"‚Ç±1500", correct:false},
      {text:"‚Ç±500", correct:true},
      {text:"‚Ç±1000", correct:false},
      {text:"‚Ç±2000", correct:false},
    ],
    time: 15
  },
  {
    title: "Level 6: Customer Service",
    question: "How should you greet a client?",
    options: [
      {text:"Ignore them", correct:false},
      {text:"Politely with a smile", correct:true},
      {text:"Shout loudly", correct:false},
      {text:"Ask them to wait outside", correct:false},
    ],
    time: 15
  }
];

function startGame() {
  player = document.getElementById("playerName").value;
  if(player === "") {
    alert("Enter name first!");
    return;
  }
  document.getElementById("start").style.display="none";
  document.getElementById("game").style.display="block";
  shuffleLevels();
  loadLevel();
}

function shuffleLevels() {
  for(let i = levels.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [levels[i], levels[j]] = [levels[j], levels[i]];
  }
}

function loadLevel() {
  if(level >= levels.length) {
    endGame();
    return;
  }

  const currentLevel = levels[level];

  document.getElementById("levelTitle").innerText = currentLevel.title;
  document.getElementById("question").innerText = currentLevel.question;

  let optionsHTML = "";
  currentLevel.options.forEach(opt => {
    optionsHTML += `<button onclick="checkAnswer(${opt.correct})">${opt.text}</button>`;
  });
  document.getElementById("options").innerHTML = optionsHTML;

  startTimer(currentLevel.time);
  updateProgress();
}

function checkAnswer(correct) {
  if(correct) {
    score += 10;
    showNotification("üéâ Well done! +10 points", "success");
    clearInterval(timerInterval);
    level++;
    loadLevel();
  } else {
    score -= 2;
    showNotification("‚ö†Ô∏è Oops! That‚Äôs wrong! -2 points", "error");
  }
}

function updateProgress() {
  let percent = (level / levels.length) * 100;
  document.getElementById("progress").style.width = percent + "%";
}

function startTimer(seconds) {
  clearInterval(timerInterval);
  let timeLeft = seconds;
  document.getElementById("timer").innerText = `Time Left: ${timeLeft}s`;

  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").innerText = `Time Left: ${timeLeft}s`;
    if(timeLeft <= 0) {
      clearInterval(timerInterval);
      showNotification("‚è∞ Time's up! Moving to next question.", "error");
      level++;
      loadLevel();
    }
  }, 1000);
}

function showNotification(message, type="success") {
  const notification = document.getElementById("notification");
  notification.innerText = message;

  if(type === "success") notification.style.background = "#2ecc71";
  else if(type === "error") notification.style.background = "#e74c3c";
  else notification.style.background = "#3498db";

  notification.style.display = "block";

  setTimeout(() => {
    notification.style.display = "none";
  }, 2000);
}

function endGame() {
  document.getElementById("game").style.display="none";
  document.getElementById("final").style.display="block";

  let rating = "";
  if(score >= 50) rating = "‚≠ê‚≠ê‚≠ê TVL-HE Master";
  else if(score >= 30) rating = "‚≠ê‚≠ê Skilled";
  else rating = "‚≠ê Beginner";

  document.getElementById("result").innerText =
    `Player: ${player}\nFinal Score: ${score}\nRating: ${rating}`;

  saveScore(player, score, rating);
}

function saveScore(name, score, rating) {
  let table = document.getElementById("scoreTable");
  let row = table.insertRow();
  row.insertCell(0).innerText = name;
  row.insertCell(1).innerText = score;
  row.insertCell(2).innerText = rating;
}

function restart() {
  level = 0;
  score = 0;
  document.getElementById("final").style.display="none";
  document.getElementById("start").style.display="block";
  document.getElementById("playerName").value="";
  document.getElementById("progress").style.width="0%";
}
</script>

<div class="footer">
</div>

</body>
</html>
